{% extends 'base.html' %}

{% block title %}Search{% if query %}: {{ query }}{% endif %} - ChrisB's Blog{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Search</h1>
    <form action="{% url 'blog:search' %}" method="get" class="search-form-page">
        <input type="search" name="q" value="{{ query }}" placeholder="Search posts...">
        <button type="submit" class="btn btn-primary">Search</button>
    </form>
</div>

{% if query %}
<div class="search-results-page">
    <h3>Results for "{{ query }}" ({{ results|length }})</h3>

    {% if results %}
    <div class="post-list">
        {% for post in results %}
        <article class="post-item">
            <div class="post-item-content">
                <h2 class="post-item-title">
                    <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
                </h2>
                <div class="post-item-excerpt">
                    {{ post.excerpt|default:post.content_md|truncatewords:30 }}
                </div>
                <div class="post-item-meta">
                    <time datetime="{{ post.published_at|date:'c' }}">{{ post.published_at|date:"m/d/Y" }}</time>
                    in <a href="{% url 'blog:home' %}">Articles</a>.
                </div>
            </div>
        </article>
        {% endfor %}
    </div>
    {% else %}
    <p>No posts found matching your search.</p>
    {% endif %}
</div>
{% endif %}
{% endblock %}
